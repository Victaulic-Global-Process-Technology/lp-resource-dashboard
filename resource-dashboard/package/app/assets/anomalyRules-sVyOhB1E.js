const i=[{ruleId:"overtime",name:"Overtime Indicator",description:"Flags team members who consistently log more than 8 hours per day.",category:"capacity",defaultSeverity:"warning",defaultEnabled:!0,rationale:"Sustained overtime can indicate unsustainable workload, impending burnout, or under-staffing on key projects.",parameters:[{key:"minDaysOver8",label:"Minimum days over threshold",description:"How many days in the month must exceed the daily hours threshold to trigger this alert.",type:"number",defaultValue:3,min:1,max:20,step:1,unit:"days"},{key:"dailyHoursThreshold",label:"Daily hours threshold",description:"What counts as an overtime day.",type:"number",defaultValue:8,min:7,max:12,step:.5,unit:"hours"}]},{ruleId:"context-switching",name:"Extreme Context Switching",description:"Flags engineers whose time is fragmented across too many projects daily.",category:"efficiency",defaultSeverity:"warning",defaultEnabled:!0,rationale:"Research shows context switching between projects reduces engineering productivity by 20-40%. Engineers with low focus scores may benefit from consolidated assignments.",parameters:[{key:"focusScoreThreshold",label:"Focus score threshold",description:"Trigger when an engineer's focus score falls below this value (0-100, lower = more fragmented).",type:"number",defaultValue:30,min:10,max:80,step:5,unit:"score"}]},{ruleId:"bus-factor",name:"Single Point of Failure",description:"Flags NPD projects where all knowledge is concentrated in one person.",category:"risk",defaultSeverity:"alert",defaultEnabled:!0,rationale:"Projects with a single contributor have no backup coverage. If that person is unavailable, the project stops. Cross-training or pair assignments reduce this risk.",parameters:[{key:"maxBusFactor",label:"Maximum bus factor",description:"Flag projects where this many or fewer people cover >50% of work.",type:"number",defaultValue:1,min:1,max:3,step:1,unit:"people"},{key:"minProjectHours",label:"Minimum project hours",description:"Only flag projects with at least this many hours (ignore trivial entries).",type:"number",defaultValue:20,min:5,max:100,step:5,unit:"hours"},{key:"projectTypesFilter",label:"Only flag NPD projects",description:"When set to 1, only NPD projects trigger this rule. Set to 0 to include sustaining projects.",type:"number",defaultValue:1,min:0,max:1,step:1,unit:""}]},{ruleId:"meeting-heavy",name:"Meeting-Heavy Engineer",description:"Flags engineers spending a disproportionate amount of time in meetings.",category:"efficiency",defaultSeverity:"info",defaultEnabled:!0,rationale:"Excessive meeting load reduces time available for engineering work. Flagging helps identify candidates for meeting audit or delegation.",parameters:[{key:"meetingPctThreshold",label:"Meeting percentage threshold",description:"Trigger when meetings exceed this percentage of total hours.",type:"percent",defaultValue:20,min:5,max:50,step:5,unit:"%"}]},{ruleId:"project-over-burn",name:"Project Over-Burning",description:"Flags NPD projects where actual hours significantly exceed planned hours.",category:"planning",defaultSeverity:"warning",defaultEnabled:!0,rationale:"Projects burning faster than planned may have scope creep, underestimated complexity, or quality issues requiring rework.",parameters:[{key:"overBurnPct",label:"Over-burn percentage",description:"Trigger when actual hours exceed planned by this percentage.",type:"percent",defaultValue:30,min:10,max:100,step:5,unit:"%"}]},{ruleId:"project-under-burn",name:"Project Under-Burning",description:"Flags projects where actual hours are significantly below planned pace.",category:"planning",defaultSeverity:"info",defaultEnabled:!0,rationale:"Projects well under planned pace may be blocked, de-prioritized, or lacking assigned resources.",parameters:[{key:"underBurnPct",label:"Under-burn percentage",description:"Trigger when actual hours are below this percentage of planned.",type:"percent",defaultValue:50,min:10,max:80,step:5,unit:"%"}]},{ruleId:"firefighting-spike",name:"Firefighting Spike",description:"Flags when unplanned/firefighting work exceeds a healthy threshold.",category:"capacity",defaultSeverity:"warning",defaultEnabled:!0,rationale:"High firefighting load indicates reactive work is displacing planned engineering. Sustained levels above 15% typically signal systemic issues.",parameters:[{key:"firefightingPctThreshold",label:"Firefighting percentage threshold",description:"Trigger when unplanned work exceeds this percentage of productive hours.",type:"percent",defaultValue:15,min:5,max:40,step:5,unit:"%"}]},{ruleId:"new-person",name:"New Team Member Detected",description:"Flags when a person appears in timesheet data for the first time.",category:"capacity",defaultSeverity:"info",defaultEnabled:!0,rationale:"Awareness of team composition changes. New members may need onboarding time that affects project velocity.",parameters:[]}];function l(r,t){const e=r.get(t);return e!==void 0?e.enabled:i.find(s=>s.ruleId===t)?.defaultEnabled??!0}function u(r,t,e){const n=r.get(t);return n?.thresholds?.[e]!==void 0?n.thresholds[e]:i.find(a=>a.ruleId===t)?.parameters.find(a=>a.key===e)?.defaultValue??0}function d(r,t){const e=r.get(t);return e?.severity?e.severity:i.find(s=>s.ruleId===t)?.defaultSeverity??"info"}function c(r,t,e){const n=r.get(t);if(!n?.thresholds?.[e])return!1;const o=i.find(a=>a.ruleId===t)?.parameters.find(a=>a.key===e);return o?n.thresholds[e]!==o.defaultValue:!1}function p(r){const t=i.find(e=>e.ruleId===r);return t?Object.fromEntries(t.parameters.map(e=>[e.key,e.defaultValue])):{}}function g(){return i.map(r=>({ruleId:r.ruleId,enabled:r.defaultEnabled,severity:r.defaultSeverity,thresholds:Object.fromEntries(r.parameters.map(t=>[t.key,t.defaultValue]))}))}export{i as ANOMALY_RULES,p as getDefaultThresholdsForRule,d as getRuleSeverity,u as getThreshold,c as isCustomValue,l as isRuleEnabled,g as seedAnomalyDefaults};
